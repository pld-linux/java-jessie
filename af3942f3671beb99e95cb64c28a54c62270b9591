- heavily modified, but based on jpackage spec
